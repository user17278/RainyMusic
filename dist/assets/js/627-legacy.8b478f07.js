"use strict";(self["webpackChunkrainymusic"]=self["webpackChunkrainymusic"]||[]).push([[627],{2627:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-page-mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.clickOtherAreaToClose.apply(null,arguments)}}},[s("div",{staticClass:"login-page"},[e._m(0),s("div",{staticClass:"user-name"},[s("button",{ref:"loginNext",staticClass:"login-next"},[s("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.idInput,expression:"idInput"}],ref:"userIdInput",attrs:{type:"text",placeholder:"RainyMusic ID"},domProps:{value:e.idInput},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.idSuccess(e.idInput)},input:function(t){t.target.composing||(e.idInput=t.target.value)}}}),s("router-view")],1),s("div",{ref:"loginTips",staticClass:"login-tips"},[s("i",{staticClass:"fa fa-info-circle",attrs:{"aria-hidden":"true"}}),e._v(" 可以立即使用的账号:Tom密码:123 或 注册新账号 ")]),s("div",{staticClass:"user-tips"},[e._v(e._s(e.loginTip))]),s("div",{staticClass:"user-remember"},[s("label",{attrs:{for:"label"},on:{change:e.clickRememberCheckBox}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.rememberCheckedStatus,expression:"rememberCheckedStatus"}],ref:"rememberCheckBox",attrs:{type:"checkbox",id:"label"},domProps:{checked:Array.isArray(e.rememberCheckedStatus)?e._i(e.rememberCheckedStatus,null)>-1:e.rememberCheckedStatus},on:{change:function(t){var s=e.rememberCheckedStatus,i=t.target,r=!!i.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);i.checked?n<0&&(e.rememberCheckedStatus=s.concat([a])):n>-1&&(e.rememberCheckedStatus=s.slice(0,n).concat(s.slice(n+1)))}else e.rememberCheckedStatus=r}}})]),s("span",[e._v("记住我的 RainyMusic ID")])]),s("div",{staticClass:"user-forget"},[s("div",{staticClass:"separator"}),e._m(1),s("span",[e._v("没有RainyMusic ID？")]),s("router-link",{attrs:{to:"/regUser"}},[e._v("立即创建您的 RainyMusic ID。")]),s("div",[s("span",{staticStyle:{color:"black"}},[e._v("或者 ")]),s("router-link",{attrs:{to:"/phoneLogin"},on:{click:e.phoneLogin}},[e._v("选择第三方账号登录 "),s("i",{staticClass:"fa fa-angle-double-right",attrs:{"aria-hidden":"true"}})])],1)],1)])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-title"},[s("span",[e._v("登录")]),s("span",[e._v("RainyMusic")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a",{attrs:{href:"javascript:alert('无功能~请创建新账号')"}},[e._v("忘记了 RainyMusic ID 或密码？")])])}],a={name:"LoginPage",data:function(){return{idInput:"",loginTip:"",rememberCheckedStatus:!1,phoneNum:null,captcha:null}},watch:{idInput:{handler:function(e,t){e!=t&&""!=t&&(this.$router.push({name:"login"}),this.$refs.userIdInput.style.borderBottomLeftRadius="10px",this.$refs.userIdInput.style.borderBottomRightRadius="10px",this.$refs.userIdInput.style.animation="none")}}},methods:{idSuccess:function(e){var t=this;this.clickRememberCheckBox,this.$axios.post("/user/userNameCheck",{username:e}).then((function(s){"用户名已存在"==s.data.message?(t.loginTip="",t.$refs.userIdInput.style.borderBottomLeftRadius="0px",t.$refs.userIdInput.style.borderBottomRightRadius="0px",t.$router.push({name:"check",params:{username:e}}),t.$refs.loginNext.style.top="45px"):"用户名格式不正确"==s.data.message?t.loginTip="格式错误":t.loginTip="不存在此ID"}))},clickRememberCheckBox:function(){this.$refs.rememberCheckBox.checked?localStorage.setItem("userId",this.idInput):localStorage.removeItem("userId")},phoneLogin:function(){this.$axios.get("http://music.cyrilstudio.top/login/cellphone?phone="+this.phoneNum+"&captcha="+this.captcha)},clickOtherAreaToClose:function(){this.$store.state.loginStatus?this.$store.state.loginStatus=!0:this.$store.state.loginStatus=!1,this.$router.push("/")},showLoginTips:function(){this.$refs.loginTips.style.animation="moving1 8s forwards"}},mounted:function(){var e=this;this.$bus.$on("getPwdMsg",(function(t){e.loginTip=t}));var t=localStorage.getItem("userId");t&&(this.idInput=localStorage.getItem("userId"),this.$refs.rememberCheckBox.checked=!0);var s=this;setTimeout((function(){s.showLoginTips()}),1e3)},beforeDestroy:function(){this.$bus.$off("getPwdMsg")}},n=a,o=s(1001),c=(0,o.Z)(n,i,r,!1,null,"2e4419d2",null),u=c.exports}}]);