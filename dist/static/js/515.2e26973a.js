"use strict";(self["webpackChunkrainymusic"]=self["webpackChunkrainymusic"]||[]).push([[515],{515:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-page-mask",on:{click:function(t){return t.target!==t.currentTarget?null:e.clickOtherAreaToClose.apply(null,arguments)}}},[s("div",{staticClass:"login-page"},[e._m(0),s("div",{staticClass:"user-name"},[s("button",{ref:"loginNext",staticClass:"login-next"},[s("i",{staticClass:"fa fa-angle-right",attrs:{"aria-hidden":"true"}})]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.idInput,expression:"idInput"}],ref:"userIdInput",attrs:{type:"text",placeholder:"RainyMusic ID"},domProps:{value:e.idInput},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.idSuccess(e.idInput)},input:function(t){t.target.composing||(e.idInput=t.target.value)}}}),s("router-view")],1),s("div",{staticClass:"user-tips"},[e._v(e._s(e.loginTip))]),s("div",{staticClass:"user-remember"},[s("label",{attrs:{for:"label"},on:{change:e.clickRememberCheckBox}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.rememberCheckedStatus,expression:"rememberCheckedStatus"}],ref:"rememberCheckBox",attrs:{type:"checkbox",id:"label"},domProps:{checked:Array.isArray(e.rememberCheckedStatus)?e._i(e.rememberCheckedStatus,null)>-1:e.rememberCheckedStatus},on:{change:function(t){var s=e.rememberCheckedStatus,r=t.target,i=!!r.checked;if(Array.isArray(s)){var a=null,n=e._i(s,a);r.checked?n<0&&(e.rememberCheckedStatus=s.concat([a])):n>-1&&(e.rememberCheckedStatus=s.slice(0,n).concat(s.slice(n+1)))}else e.rememberCheckedStatus=i}}})]),s("span",[e._v("记住我的 RainyMusic ID")])]),s("div",{staticClass:"user-forget"},[s("div",{staticClass:"separator"}),e._m(1),s("span",[e._v("没有RainyMusic ID？")]),s("router-link",{attrs:{to:"/regUser"}},[e._v("立即创建您的 RainyMusic ID。")]),s("div",[s("span",{staticStyle:{color:"black"}},[e._v("或者 ")]),s("router-link",{attrs:{to:"/phoneLogin"},on:{click:e.phoneLogin}},[e._v("选择第三方账号登录 "),s("i",{staticClass:"fa fa-angle-double-right",attrs:{"aria-hidden":"true"}})])],1)],1)])])},i=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login-title"},[s("span",[e._v("登录")]),s("span",[e._v("RainyMusic")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("a",{attrs:{href:""}},[e._v("忘记了 RainyMusic ID 或密码？")])])}],a={name:"LoginPage",data(){return{idInput:"",loginTip:"",rememberCheckedStatus:!1,phoneNum:null,captcha:null}},watch:{idInput:{handler(e,t){e!=t&&""!=t&&(this.$router.push({name:"login"}),this.$refs.userIdInput.style.borderBottomLeftRadius="10px",this.$refs.userIdInput.style.borderBottomRightRadius="10px",this.$refs.userIdInput.style.animation="none")}}},methods:{idSuccess:function(e){this.clickRememberCheckBox,this.$axios.post("user/userNameCheck",{username:e}).then((t=>{"用户名已存在"==t.data.message?(this.loginTip="",this.$refs.userIdInput.style.borderBottomLeftRadius="0px",this.$refs.userIdInput.style.borderBottomRightRadius="0px",this.$router.push({name:"check",params:{username:e}}),this.$refs.loginNext.style.top="45px"):"用户名格式不正确"==t.data.message?this.loginTip="格式错误":this.loginTip="不存在此ID"}))},clickRememberCheckBox:function(){this.$refs.rememberCheckBox.checked?localStorage.setItem("userId",this.idInput):localStorage.removeItem("userId")},phoneLogin:function(){this.$axios.get("http://music.cyrilstudio.top/login/cellphone?phone="+this.phoneNum+"&captcha="+this.captcha)},clickOtherAreaToClose:function(){this.$store.state.loginStatus?this.$store.state.loginStatus=!0:this.$store.state.loginStatus=!1,this.$router.push("/")}},mounted(){this.$bus.$on("getPwdMsg",(e=>{this.loginTip=e}));let e=localStorage.getItem("userId");e&&(this.idInput=localStorage.getItem("userId"),this.$refs.rememberCheckBox.checked=!0)},beforeDestroy(){this.$bus.$off("hgetPwdMsg")}},n=a,o=s(1),u=(0,o.Z)(n,r,i,!1,null,"7b6ac531",null),c=u.exports}}]);
//# sourceMappingURL=515.2e26973a.js.map